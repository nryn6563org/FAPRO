/*
  대시보드 스타일 (Dashboard Styles)
  - 대시보드 레이아웃, 헤더, 그리드 시스템 및 드래그 튜닝 스타일 정의
*/

/* 대시보드 헤더 컴포넌트 */
.c-dashboard-header {
    @apply flex items-center justify-between mb-10;
}

.c-dashboard-header__title {
    @apply text-2xl font-bold dark:text-white;
}

.c-dashboard-header__desc {
    @apply text-slate-600 dark:text-slate-400 mt-1 text-[13px];
}

/* 우측 상단 액션 버튼 그룹 */
.c-dashboard-header__actions {
    @apply flex gap-2;
}

/* 위젯 편집 버튼 */
.c-dashboard-header__btn-edit {
    @apply gap-2 bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700;
}

/* 정보 추가 버튼 */
.c-dashboard-header__btn-add {
    @apply gap-2;
}

/* 헤더 아이콘 공통 */
.c-dashboard-header__icon {
    @apply w-4 h-4;
}

/* 애니메이션 정의 */
@keyframes slide-in-bottom {
    from {
        transform: translate(-50%, 1rem);
        opacity: 0;
    }

    to {
        transform: translate(-50%, 0);
        opacity: 1;
    }
}

@keyframes slide-out-bottom {
    from {
        transform: translate(-50%, 0);
        opacity: 1;
    }

    to {
        transform: translate(-50%, 1rem);
        opacity: 0;
    }
}

/* 편집 모드 플로팅 바 (하단 고정) */
.c-dashboard__edit-bar {
    @apply fixed bottom-10 left-1/2 -translate-x-1/2 z-50 bg-slate-900/90 text-white px-8 py-4 rounded-full shadow-2xl backdrop-blur-sm flex items-center justify-between min-w-[400px];

    animation: slide-in-bottom 0.2s ease-out forwards;
}

.c-dashboard__edit-label {
    @apply text-lg font-bold mr-3;
}

/* 편집 취소 버튼 */
.c-dashboard__edit-btn-cancel {
    @apply text-sm bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-sm transition-colors;
}

/* 편집 저장 버튼 */
.c-dashboard__edit-btn-save {
    @apply text-sm bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-sm transition-colors font-semibold;
}

/* 버튼 액션 그룹 */
.c-dashboard__edit-actions {
    @apply flex items-center gap-2;
}

/* 대시보드 그리드 레이아웃 (Grid System) */
.c-dashboard__grid {
    @apply grid gap-6 pb-20 grid-flow-dense;
    
    /* 컨테이너 너비를 기준으로 유동적인 계산을 위한 속성 */
    container-type: inline-size;

    /* 1920 해상도에서 2x1 위젯 4개가 한 라인에 들어가도록 8컬럼 설정 */
    /* 1fr 단위로 설정하여 l-main 크기에 따라 비율로 조절됨 */
    grid-template-columns: repeat(8, 1fr);
    
    /* 한 유닛의 높이를 너비와 동일한 비율로 유지 (정사각형 유닛 기준) */
    /* (전체 너비 100cqi - (7개의 간격 * 1.5rem)) / 8컬럼 */
    grid-auto-rows: calc((100cqi - (7 * 1.5rem)) / 8);
}

.c-dashboard__grid-item {
    @apply transition-transform duration-200;
}

/* 그리드 아이템 크기 변형 (Sizes) */
/* 너비 (Width) */
.c-dashboard__grid-item--w-1 { @apply col-span-1; }
.c-dashboard__grid-item--w-2 { @apply col-span-1 md:col-span-2; }
.c-dashboard__grid-item--w-3 { @apply col-span-1 md:col-span-3; }
.c-dashboard__grid-item--w-4 { @apply col-span-1 md:col-span-4; }

/* 높이 (Height) */
.c-dashboard__grid-item--h-1 { @apply row-span-1; }
.c-dashboard__grid-item--h-2 { @apply row-span-2; }
.c-dashboard__grid-item--h-3 { @apply row-span-3; }
.c-dashboard__grid-item--h-4 { @apply row-span-4; }

.c-dashboard__grid-item-inner {
    @apply relative h-full;
}

/* 드래그 핸들 (편집 모드 시 노출) */
.c-dashboard__drag-handle {
    @apply absolute -left-3 top-[-10px] z-20 cursor-move bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-full p-1.5 shadow-md hover:scale-110 transition-transform hover:border-blue-500 flex items-center justify-center;
}

.c-dashboard__drag-icon {
    @apply w-4 h-4 text-slate-600 dark:text-slate-300;
}

/* 드래그 고스트 스타일 (이동 중인 아이템 잔상) */
.ghost-card {
    @apply relative opacity-60 bg-red-50 dark:bg-red-900/10 border-2 border-dashed border-red-400 dark:border-red-500 rounded overflow-hidden flex items-center justify-center;
}

.ghost-card::before {
    content: '+';
    @apply absolute flex items-center justify-center w-10 h-10 bg-red-500 text-red-50 text-opacity-60 rounded-full text-2xl font-semibold transition-transform;
}

/* 고스트 카드 내부 콘텐츠 숨김 */
.ghost-card > * {
    @apply invisible;
}

/* 드래그 중인 원본 아이템 스타일 (Fallback) */
.sortable-fallback {
    @apply opacity-90 scale-105 shadow-2xl cursor-grabbing ring-2 ring-blue-500 rounded-xl z-50 !important;
    transform-origin: center center;
    transition: none !important; /* 드래그 시 딜레이 제거 */
}

/* 빈 상태 (Empty State) - 위젯 없을 때 */
.c-dashboard__empty {
    @apply flex items-center justify-center p-16 border dark:border-slate-700 rounded bg-white dark:bg-slate-800 transition-colors;
}

.c-dashboard__empty-content {
    @apply text-center;
}

.c-dashboard__empty-icon {
    @apply w-16 h-16 text-slate-300 dark:text-slate-600 mx-auto mb-4;
}

.c-dashboard__empty-title {
    @apply text-xl font-semibold mb-2 dark:text-white;
}

.c-dashboard__empty-desc {
    @apply text-slate-600 dark:text-slate-400 mb-6;
}

.c-dashboard__btn-add {
    @apply gap-2;
}

.c-dashboard__btn-icon {
    @apply w-4 h-4;
}

/* 위젯 다이얼로그 스타일 - 프리미엄 디자인 적용 (Refinement) */
#dashboard-widget-modal {
    @apply flex h-full overflow-hidden;
}

/* 좌측 사이드바 (카테고리) */
.c-widget-dialog__sidebar {
    @apply w-72 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex flex-col shadow-[4px_0_24px_rgba(0,0,0,0.02)];
    z-index: 10;
}

.c-widget-dialog__sidebar-header {
    @apply p-8 border-b border-slate-100 dark:border-slate-700;
}

.c-widget-dialog__sidebar-title {
    @apply text-xl font-bold text-slate-900 dark:text-white tracking-tight;
}

.c-widget-dialog__sidebar-desc {
    @apply text-[11px] font-bold text-slate-400 dark:text-slate-500 mt-2 uppercase tracking-wider;
}

.c-widget-dialog__category-list {
    @apply flex-1 overflow-y-auto py-6 px-3 space-y-1;
}

/* 카테고리 버튼 */
.c-widget-dialog__category-btn {
    @apply w-full text-left px-5 py-3.5 text-[13px] font-bold transition-all flex items-center justify-between text-slate-500 dark:text-slate-400 rounded hover:bg-slate-50 dark:hover:bg-slate-700/50;
}

/* 활성 카테고리 버튼 */
.c-widget-dialog__category-btn--active {
    @apply bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 shadow-sm ring-1 ring-blue-100 dark:ring-blue-900/30;
}

.c-widget-dialog__category-count {
    @apply text-[10px] bg-slate-100 dark:bg-slate-800 text-slate-400 dark:text-slate-500 px-2 py-0.5 rounded-xl font-bold;
}

.c-widget-dialog__footer {
    @apply p-6 border-t border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800;
}

.c-widget-dialog__footer-actions {
    @apply flex items-center gap-3;
}

.c-widget-dialog__btn-cancel {
    @apply flex-1 h-11 border-slate-200 dark:border-slate-700 text-slate-500 font-bold hover:bg-slate-50 dark:hover:bg-slate-700 rounded;
}

.c-widget-dialog__btn-apply {
    @apply flex-1 h-11 bg-slate-900 dark:bg-blue-600 hover:bg-slate-800 dark:hover:bg-blue-500 text-white font-bold shadow-lg shadow-slate-900/10 dark:shadow-blue-900/20 rounded;
}

/* 우측 콘텐츠 영역 (위젯 그리드) */
.c-widget-dialog__content {
    @apply flex-1 flex flex-col bg-slate-50 dark:bg-slate-950 min-h-0;
}

.c-widget-dialog__content-header {
    @apply p-[32px_60px_32px_40px] border-b border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md flex items-center justify-between sticky top-0 z-10;
}

.c-widget-dialog__content-title {
    @apply font-bold text-xl text-slate-900 dark:text-white flex items-center gap-2;
}

.c-widget-dialog__content-subtitle {
    @apply text-slate-400 font-bold text-xs uppercase tracking-widest;
}

/* 다이얼로그 모달 본문 스타일 */
.c-widget-dialog__dialog-content {
    @apply max-w-[85rem] h-[85vh] overflow-hidden flex flex-col p-0 border-none shadow-2xl rounded-xl;
}

.c-widget-dialog__search-wrapper {
    @apply relative;
}

.c-widget-dialog__search-icon {
    @apply absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400;
}

.c-widget-dialog__search-input {
    @apply pl-11 pr-6 py-2.5 text-sm border-none bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-white rounded focus:ring-2 focus:ring-blue-500/20 w-80 transition-all font-bold;
}


.c-widget-dialog__actions {
    @apply flex items-center gap-3;
}

.c-widget-dialog__grid-wrapper {
    @apply flex-1 overflow-y-auto p-10 min-h-0;
}

.c-widget-dialog__grid {
    @apply grid grid-cols-4 gap-6 pb-20;
}

.c-widget-card__content {
    @apply w-full;
}

/* [NEW] 위젯 삭제 마스킹 (호버 시 노출) */
.c-widget-card__mask {
    @apply absolute inset-0 bg-slate-900/60 z-10 opacity-0 transition-opacity flex items-center justify-center rounded cursor-pointer duration-200 backdrop-blur-[1px];
}

.c-widget-card:hover .c-widget-card__mask {
    @apply opacity-100;
}

.c-widget-card__delete-icon {
    @apply w-8 h-8 text-white drop-shadow-md hover:scale-110 transition-transform;
}

/* 위젯 선택 카드 스타일 (Enhanced Widget Card) */
.c-widget-card {
    @apply relative flex flex-col items-start p-[12px_20px] rounded border-2 transition-all duration-300 text-left bg-white dark:bg-slate-900 border-white dark:border-slate-800 shadow-sm hover:translate-y-[-4px] hover:shadow-xl;
}

/* 선택된 위젯 카드 강조 */
.c-widget-card--selected {
    @apply border-blue-500 ring-4 ring-blue-500/10 bg-blue-50/10 dark:bg-blue-900/5;
}

.c-widget-card__checkbox {
    @apply absolute top-6 right-6 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800;
}

.c-widget-card__checkbox--checked {
    @apply bg-blue-600 border-blue-600 scale-110 shadow-lg shadow-blue-500/20;
}

.c-widget-card__check-icon {
    @apply text-white w-3.5 h-3.5;
}

.c-widget-card__icon-wrapper {
    @apply w-14 h-14 rounded flex items-center justify-center mb-6 transition-all bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 shadow-sm;
}

.c-widget-card--selected .c-widget-card__icon-wrapper {
    @apply bg-blue-600 text-white shadow-lg shadow-blue-500/20 scale-105;
}

.c-widget-card__title {
    @apply font-bold text-base mb-3 text-slate-800 dark:text-slate-100 leading-tight;
}

/* 위젯 사이즈 조절 옵션 */
.c-widget-card__size-options {
    @apply flex items-center gap-3 mt-auto pt-4 w-full border-t border-slate-50 dark:border-slate-800;
}

.c-widget-card__size-control {
    @apply flex items-center gap-2;
}

.c-widget-card__size-label {
    @apply text-[10px] font-bold text-slate-400 uppercase tracking-tighter;
}

.c-widget-card__size-select {
    @apply text-xs font-bold py-1.5 pl-3 pr-8 border-none bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded focus:ring-2 focus:ring-blue-500/20 appearance-none transition-colors;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2364748b' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1rem;
    min-width: 4rem;
}

/* 위젯 다이얼로그 전용 편집 모드 플로팅 바 */
.c-widget-dialog__edit-mode-bar {
    @apply absolute bottom-8 left-1/2 -translate-x-1/2 z-20 flex items-center gap-3 bg-slate-900 text-white px-6 py-3 rounded-full shadow-xl;
}

/* Vue Slide Up/Down Animation */
.slide-up-enter-active {
    animation: slide-in-bottom 0.2s ease-out forwards;
}

.slide-up-leave-active {
    animation: slide-out-bottom 0.2s ease-in forwards;
}

.c-widget-dialog__edit-mode-label {
    @apply text-sm font-bold mr-2;
}

.c-widget-dialog__edit-mode-btn-cancel {
    @apply px-3 py-1.5 rounded-xl bg-slate-700 hover:bg-slate-600 text-xs font-bold transition-colors;
}

.c-widget-dialog__edit-mode-btn-save {
    @apply px-3 py-1.5 rounded-xl bg-blue-600 hover:bg-blue-500 text-xs font-bold transition-colors flex items-center gap-1.5;
}

.c-widget-dialog__edit-mode-icon {
    @apply w-3 h-3;
}

/* 위젯 편집 모드 진입 버튼 */
.c-widget-dialog__btn-edit-mode {
    @apply flex items-center gap-2 px-3 h-10 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 transition-colors;
}

.c-widget-dialog__btn-edit-mode-icon {
    @apply w-4 h-4 text-slate-500;
}

.c-widget-dialog__btn-edit-mode-text {
    @apply text-xs font-bold text-slate-600 dark:text-slate-300;
}
